function updateBasketTable(t,e){var a,s,i,l,r,n,_,o,c,d,u,p,T,A,b,B,E,m,X,v,I,y,S,D,f,O,U,g,h,k,C,N,P,L,R,M,x,F,Y,Q,H,w=BX("basket_items"),K=!1,V=!1,W=!1,j=!1;if(w&&"object"==typeof e){if(l=(a=w.rows)[a.length-1],_="Y"===e.PARAMS.QUANTITY_FLOAT,null!==t&&e.BASKET_DATA){for(s=e.BASKET_ID,i=e.BASKET_DATA.GRID.ROWS[s],n=e.COLUMNS.split(","),r=document.createElement("tr"),o=BX(t),r.setAttribute("id",e.BASKET_ID),l.parentNode.insertBefore(r,o.nextSibling),"Y"===e.DELETE_ORIGINAL&&o.parentNode.removeChild(o),r.insertCell(-1).setAttribute("class","margin"),c=0;c<n.length;c++)"DELETE"===n[c]?K=!0:"DELAY"===n[c]?V=!0:"PROPS"===n[c]?W=!0:"TYPE"===n[c]&&(j=!0);for(c=0;c<n.length;c++)switch(n[c]){case"PROPS":case"DELAY":case"DELETE":case"TYPE":break;case"NAME":if(u="",p="",(d=r.insertCell(-1)).setAttribute("class","itemphoto"),u=i.PREVIEW_PICTURE_SRC.length>0?i.PREVIEW_PICTURE_SRC:i.DETAIL_PICTURE_SRC.length>0?i.DETAIL_PICTURE_SRC:basketJSParams.TEMPLATE_FOLDER+"/images/no_photo.png",p=i.DETAIL_PAGE_URL.length>0?'<div class="bx_ordercart_photo_container">\t\t\t\t\t\t\t<a href="'+i.DETAIL_PAGE_URL+'">\t\t\t\t\t\t\t\t<div class="bx_ordercart_photo" style="background-image:url(\''+u+"')\"></div>\t\t\t\t\t\t\t</a>\t\t\t\t\t\t</div>":'<div class="bx_ordercart_photo_container">\t\t\t\t\t\t\t<div class="bx_ordercart_photo" style="background-image:url(\''+u+"')\"></div>\t\t\t\t\t\t</div>",i.BRAND&&i.BRAND.length>0&&(p+='<div class="bx_ordercart_brand">\t\t\t\t\t\t\t<img alt="" src="'+i.BRAND+'"/>\t\t\t\t\t\t</div>'),d.innerHTML=p,A="",(T=r.insertCell(-1)).setAttribute("class","item"),i.DETAIL_PAGE_URL.length>0?A+='<h2 class="bx_ordercart_itemtitle"><a href="'+i.DETAIL_PAGE_URL+'">'+i.NAME+"</a></h2>":A+='<h2 class="bx_ordercart_itemtitle">'+i.NAME+"</h2>",A+='<div class="bx_ordercart_itemart">',W)for(B=0;B<i.PROPS.length;B++){if(E=i.PROPS[B],i.SKU_DATA){for(m in b=!1,i.SKU_DATA)if(i.SKU_DATA.hasOwnProperty(m)&&(X=i.SKU_DATA[m]).CODE===E.CODE){b=!0;break}if(b)continue}A+=E.NAME+":&nbsp;<span>"+E.VALUE+"</span><br/>"}if(A+="</div>",i.SKU_DATA)for(m in i.SKU_DATA)if(i.SKU_DATA.hasOwnProperty(m)){for(S in X=i.SKU_DATA[m],v=!1,I=BX.util.array_keys(X.VALUES).length>5?"full":"",X.VALUES)if((y=X.VALUES[S])&&"object"==typeof y&&y.PICT){v=!0;break}if(v){for(O in A+='<div class="bx_item_detail_scu_small_noadaptive '+I+'">',A+='<span class="bx_item_section_name_gray">'+X.NAME+"</span>",A+='<div class="bx_scu_scroller_container">',A+='<div class="bx_scu">',A+='<ul id="prop_'+X.CODE+"_"+i.ID+'" style="width: 200%; margin-left:0%;" class="sku_prop_list">',X.VALUES){for(D=X.VALUES[O],f="",U=0;U<i.PROPS.length;U++)(g=i.PROPS[U]).CODE===X.CODE&&(g.VALUE!==D.NAME&&g.VALUE!==D.XML_ID||(f="bx_active"));A+='<li style="width:10%;"\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="sku_prop '+f+'"\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-value-id="'+D.XML_ID+'"\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-element="'+i.ID+'"\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-property="'+X.CODE+'"\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span style="background-image:url('+D.PICT.SRC+')"></span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\t\t\t\t\t\t\t\t\t\t\t\t\t\t</li>'}A+="</ul>",A+="</div>",A+='<div class="bx_slide_left" onclick="leftScroll(\''+X.CODE+"', "+i.ID+", "+BX.util.array_keys(X.VALUES).length+');"></div>',A+='<div class="bx_slide_right" onclick="rightScroll(\''+X.CODE+"', "+i.ID+", "+BX.util.array_keys(X.VALUES).length+');"></div>',A+="</div>",A+="</div>"}else{for(O in A+='<div class="bx_item_detail_size_small_noadaptive '+I+'">',A+='<span class="bx_item_section_name_gray">'+X.NAME+"</span>",A+='<div class="bx_size_scroller_container">',A+='<div class="bx_size">',A+='<ul id="prop_'+X.CODE+"_"+i.ID+'" style="width: 200%; margin-left:0%;" class="sku_prop_list">',X.VALUES){for(D=X.VALUES[O],f="",U=0;U<i.PROPS.length;U++)(g=i.PROPS[U]).CODE===X.CODE&&g.VALUE===D.NAME&&(f="bx_active");A+='<li style="width:10%;"\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="sku_prop '+f+'"\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-value-id="'+D.NAME+'"\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-element="'+i.ID+'"\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-property="'+X.CODE+'"\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);">'+D.NAME+"</span></a>\t\t\t\t\t\t\t\t\t\t\t\t\t\t</li>"}A+="</ul>",A+="</div>",A+='<div class="bx_slide_left" onclick="leftScroll(\''+X.CODE+"', "+i.ID+", "+BX.util.array_keys(X.VALUES).length+');"></div>',A+='<div class="bx_slide_right" onclick="rightScroll(\''+X.CODE+"', "+i.ID+", "+BX.util.array_keys(X.VALUES).length+');"></div>',A+="</div>",A+="</div>"}}T.innerHTML=A;break;case"QUANTITY":h=r.insertCell(-1),k="",C=parseFloat(i.MEASURE_RATIO)>0?i.MEASURE_RATIO:1,N=parseFloat(i.AVAILABLE_QUANTITY)>0?'max="'+i.AVAILABLE_QUANTITY+'"':"",P=!1,0!=C&&""!=C&&(L=i.QUANTITY,i.QUANTITY=getCorrectRatioQuantity(i.QUANTITY,C,_),L!=i.QUANTITY&&(P=!0)),h.setAttribute("class","custom"),k+="<span>"+getColumnName(e,n[c])+":</span>",k+='<div class="centered">',k+='<table cellspacing="0" cellpadding="0" class="counter">',k+="<tr>",k+="<td>",0!=C&&""!=C&&(k+='<a href="javascript:void(0);" class="minus bxr-quantity-button-minus-big-basket" onclick="setQuantity('+i.ID+", "+C+", 'down', "+_+');">-</a>'),k+='<input type="text" size="3" id="QUANTITY_INPUT_'+i.ID+'"\t\t\t\t\t\t\t\t\t\t\tname="QUANTITY_INPUT_'+i.ID+'"\t\t\t\t\t\t\t\t\t\t\tsize="2" maxlength="18" min="0" '+N+"step="+C+'\t\t\t\t\t\t\t\t\t\t\tclass="bxr-quantity-text-big-basket"\t\t\t\t\t\t\t\t\t\t\tvalue="'+i.QUANTITY+'"\t\t\t\t\t\t\t\t\t\t\tonchange="updateQuantity(\'QUANTITY_INPUT_'+i.ID+"','"+i.ID+"', "+C+","+_+')"\t\t\t\t\t\t>',0!=C&&""!=C&&(k+='<a href="javascript:void(0);" class="minus bxr-quantity-button-plus-big-basket" onclick="setQuantity('+i.ID+", "+C+", 'down', "+_+');">+</a>'),k+="</td>",i.hasOwnProperty("MEASURE_TEXT")&&i.MEASURE_TEXT.length>0&&(k+='<td style="text-align: left">'+i.MEASURE_TEXT+"</td>"),k+="</tr>",k+="</table>",k+="</div>",k+='<input type="hidden" id="QUANTITY_'+i.ID+'" name="QUANTITY_'+i.ID+'" value="'+i.QUANTITY+'" />',h.innerHTML=k,P&&updateQuantity("QUANTITY_INPUT_"+i.ID,i.ID,C,_);break;case"PRICE":R=r.insertCell(-1),M=i.FULL_PRICE_FORMATED!=i.PRICE_FORMATED?i.FULL_PRICE_FORMATED:"",R.setAttribute("class","price"),R.innerHTML+='<div class="current_price" id="current_price_'+i.ID+'">'+i.PRICE_FORMATED+"</div>",R.innerHTML+='<div class="old_price" id="old_price_'+i.ID+'">'+M+"</div>",j&&i.NOTES.length>0&&(R.innerHTML+='<div class="type_price">'+basketJSParams.SALE_TYPE+"</div>",R.innerHTML+='<div class="type_price_value">'+i.NOTES+"</div>");break;case"DISCOUNT":(F=r.insertCell(-1)).setAttribute("class","custom"),F.innerHTML="<span>"+getColumnName(e,n[c])+":</span>",F.innerHTML+='<div id="discount_value_'+i.ID+'">'+i.DISCOUNT_PRICE_PERCENT_FORMATED+"</div>";break;case"WEIGHT":(Y=r.insertCell(-1)).setAttribute("class","custom"),Y.innerHTML="<span>"+getColumnName(e,n[c])+":</span>",Y.innerHTML+=i.WEIGHT_FORMATED;break;default:H="",(Q=r.insertCell(-1)).setAttribute("class","custom"),Q.innerHTML="<span>"+getColumnName(e,n[c])+":</span>","SUM"==n[c]&&(H+='<div id="sum_'+i.ID+'">'),void 0!==i[n[c]]&&(H+=i[n[c]]),"SUM"==n[c]&&(H+="</div>"),Q.innerHTML+=H}if(K||V){var G=r.insertCell(-1);G.setAttribute("class","control"),K&&(G.innerHTML='<a class="bxr-icon-button-delete-big-baske" href="'+basketJSParams.DELETE_URL.replace("#ID#",i.ID)+'"><span class="fa fa-close" aria-hidden="true"></span></a>'),V&&(G.innerHTML+='<a  class="bxr-icon-button-delay-big-baske"  href="'+basketJSParams.DELAY_URL.replace("#ID#",i.ID)+'"><span class="fa fa-heart-o" aria-hidden="true"></span></a>')}r.insertCell(-1).setAttribute("class","margin");var q=BX.findChildren(BX(s),{tagName:"li",className:"sku_prop"},!0);if(q&&q.length>0)for(c=0;q.length>c;c++)BX.bind(q[c],"click",BX.delegate(function(t){skuPropClickHandler(t)},this))}if(e.BASKET_DATA)for(x in e.BASKET_DATA.GRID.ROWS)if(e.BASKET_DATA.GRID.ROWS.hasOwnProperty(x)){var J=e.BASKET_DATA.GRID.ROWS[x];BX("discount_value_"+x)&&(BX("discount_value_"+x).innerHTML=J.DISCOUNT_PRICE_PERCENT_FORMATED),BX("current_price_"+x)&&(BX("current_price_"+x).innerHTML=J.PRICE_FORMATED),BX("old_price_"+x)&&(BX("old_price_"+x).innerHTML=J.FULL_PRICE_FORMATED!=J.PRICE_FORMATED?J.FULL_PRICE_FORMATED:""),BX("sum_"+x)&&(BX("sum_"+x).innerHTML=J.SUM),BX("QUANTITY_"+x)&&(BX("QUANTITY_INPUT_"+x).value=J.QUANTITY,BX("QUANTITY_INPUT_"+x).defaultValue=J.QUANTITY,BX("QUANTITY_"+x).value=J.QUANTITY)}if(e.BASKET_DATA&&couponListUpdate(e.BASKET_DATA),e.hasOwnProperty("WARNING_MESSAGE")){var z="";for(c=e.WARNING_MESSAGE.length-1;c>=0;c--)z+=e.WARNING_MESSAGE[c]+"<br/>";BX("warning_message").innerHTML=z}e.BASKET_DATA&&(BX("allWeight_FORMATED")&&(BX("allWeight_FORMATED").innerHTML=e.BASKET_DATA.allWeight_FORMATED.replace(/\s/g,"&nbsp;")),BX("allSum_wVAT_FORMATED")&&(BX("allSum_wVAT_FORMATED").innerHTML=e.BASKET_DATA.allSum_wVAT_FORMATED.replace(/\s/g,"&nbsp;")),BX("allVATSum_FORMATED")&&(BX("allVATSum_FORMATED").innerHTML=e.BASKET_DATA.allVATSum_FORMATED.replace(/\s/g,"&nbsp;")),BX("allSum_FORMATED")&&(BX("allSum_FORMATED").innerHTML=e.BASKET_DATA.allSum_FORMATED.replace(/\s/g,"&nbsp;")),BX("PRICE_WITHOUT_DISCOUNT")&&(BX("PRICE_WITHOUT_DISCOUNT").innerHTML=e.BASKET_DATA.PRICE_WITHOUT_DISCOUNT!=e.BASKET_DATA.allSum_FORMATED?e.BASKET_DATA.PRICE_WITHOUT_DISCOUNT.replace(/\s/g,"&nbsp;"):""),minOrderPrice=parseInt($("#min-order-price").val()),currency=$("#currency-format").val(),minOrderPriceFormated=currency.replace("#",minOrderPrice),addPrice=minOrderPrice-e.BASKET_DATA.allSum,addPrice=addPrice.toFixed(2),addPriceFormated=currency.replace("#",addPrice),minOrderPriceMsg=$("#min-order-price-msg").val(),minOrderPriceMsg=minOrderPriceMsg.replace("#MIN_ORDER_PRICE#",minOrderPriceFormated),minOrderPriceMsg=minOrderPriceMsg.replace("#ADD_ORDER_PRICE#",addPriceFormated),e.BASKET_DATA.allSum>=minOrderPrice?($(".min-order-price-notify").hide(),$(".checkout").show()):($(".min-order-price-notify").html(minOrderPriceMsg),$(".min-order-price-notify").show(),$(".checkout").hide()),BX.onCustomEvent("OnBasketChange"))}}function couponCreate(t,e){var a="disabled";BX.type.isElementNode(t)&&("BAD"===e.JS_STATUS?a="bad":"APPLYED"===e.JS_STATUS&&(a="good"),t.appendChild(BX.create("div",{props:{className:"bx_ordercart_coupon"},children:[BX.create("input",{props:{className:a,type:"text",value:e.COUPON,name:"OLD_COUPON[]"},attrs:{disabled:!0,readonly:!0}}),BX.create("span",{props:{className:a},attrs:{"data-coupon":e.COUPON}}),BX.create("div",{props:{className:"bx_ordercart_coupon_notes"},html:e.JS_CHECK_CODE})]})))}function couponListUpdate(t){var e,a,s,i,l,r,n,_;if(!t||"object"==typeof t){if((e=BX("coupons_block"))&&t.COUPON_LIST&&BX.type.isArray(t.COUPON_LIST))if((s=BX("coupon"))&&(s.value=""),i=BX.findChildren(e,{tagName:"input",property:{name:"OLD_COUPON[]"}},!0)){for(BX.type.isElementNode(i)&&(i=[i]),r=0;r<t.COUPON_LIST.length;r++){for(l=!1,_=-1,n=0;n<i.length;n++)if(i[n].value===t.COUPON_LIST[r].COUPON){l=!0,_=n,i[n].couponUpdate=!0;break}l?(a="disabled","BAD"===t.COUPON_LIST[r].JS_STATUS?a="bad":"APPLYED"===t.COUPON_LIST[r].JS_STATUS&&(a="good"),BX.adjust(i[_],{props:{className:a}}),BX.adjust(i[_].nextSibling,{props:{className:a}}),BX.adjust(i[_].nextSibling.nextSibling,{html:t.COUPON_LIST[r].JS_CHECK_CODE})):couponCreate(e,t.COUPON_LIST[r])}for(n=0;n<i.length;n++)void 0!==i[n].couponUpdate&&i[n].couponUpdate?i[n].couponUpdate=null:(BX.remove(i[n].parentNode),i[n]=null)}else for(r=0;r<t.COUPON_LIST.length;r++)couponCreate(e,t.COUPON_LIST[r]);e=null}}function skuPropClickHandler(t){t||(t=window.event);var e,a,s,i,l,r,n,_=BX.proxy_context,o={},c={};if(_&&_.hasAttribute("data-value-id")){if(BX.showWait(),e=_.getAttribute("data-element"),a=_.getAttribute("data-property"),s=BX("action_var").value,o[a]=_.getAttribute("data-value-id"),BX.hasClass(_,"bx_active"))return void BX.closeWait();if((i=BX.findChildren(BX(e),{tagName:"ul",className:"sku_prop_list"},!0))&&i.length>0)for(l=0;i.length>l;l++)if(i[l].id!=="prop_"+a+"_"+e&&(r=BX.findChildren(BX(i[l].id),{tagName:"li",className:"bx_active"},!0))&&r.length>0)for(n=0;r.length>n;n++)r[n].hasAttribute("data-value-id")&&(o[r[n].getAttribute("data-property")]=r[n].getAttribute("data-value-id"));(c={basketItemId:e,sessid:BX.bitrix_sessid(),site_id:BX.message("SITE_ID"),props:o,action_var:s,select_props:BX("column_headers").value,offers_props:BX("offers_props").value,quantity_float:BX("quantity_float").value,count_discount_4_all_quantity:BX("count_discount_4_all_quantity").value,price_vat_show_value:BX("price_vat_show_value").value,hide_coupon:BX("hide_coupon").value,use_prepayment:BX("use_prepayment").value})[s]="select_item",BX.ajax({url:"/bitrix/components/bitrix/sale.basket.basket/ajax.php",method:"POST",data:c,dataType:"json",onsuccess:function(t){BX.closeWait(),updateBasketTable(e,t)}})}}function getColumnName(t,e){return BX("col_"+e)?BX.util.trim(BX("col_"+e).innerHTML):""}function leftScroll(t,e,a){a=parseInt(a,10);var s=BX("prop_"+t+"_"+e);if(s){var i=parseInt(s.style.marginLeft,10);i<=20*(6-a)&&(s.style.marginLeft=i+20+"%")}}function rightScroll(t,e,a){a=parseInt(a,10);var s=BX("prop_"+t+"_"+e);if(s){var i=parseInt(s.style.marginLeft,10);i>20*(5-a)&&(s.style.marginLeft=i-20+"%")}}function checkOut(){return BX("coupon")&&(BX("coupon").disabled=!0),BX("basket_form").submit(),!0}function enterCoupon(){var t=BX("coupon");t&&t.value&&recalcBasketAjax({coupon:t.value})}function updateQuantity(t,e,a,s){var i=String(a).split("."),l=0;l=null!=i[1]&&null!=i[1]&&""!=i[1]?i[1].length:0;var r=BX(t).defaultValue,n=parseFloat(BX(t).value)||0,_=!1;if(0===a||1==a)_=!0;else{var o=1e4*n%(1e4*a);parseInt(n);0===o&&(_=!0)}var c=!1;parseInt(n)!=parseFloat(n)&&(c=!0),n=!1===s&&!1===c?parseInt(n):parseFloat(n).toFixed(l),_?(BX(t).defaultValue=n,BX("QUANTITY_INPUT_"+e).value=n,BX("QUANTITY_"+e).value=n,recalcBasketAjax({})):(n=getCorrectRatioQuantity(n,a,s))!=r?(BX("QUANTITY_INPUT_"+e).value=n,BX("QUANTITY_"+e).value=n,recalcBasketAjax({})):BX(t).value=r}function setQuantity(t,e,a,s){var i=String(e).split("."),l=0;l=null!=i[1]&&null!=i[1]&&""!=i[1]?i[1].length:0;var r,n=parseFloat(BX("QUANTITY_INPUT_"+t).value);(r="up"==a?n+e:n-e)<0&&(r=0),s&&(r=r.toFixed(l)),e>0&&r<e&&(r=e),s||r==r.toFixed(l)||(r=r.toFixed(l)),r=getCorrectRatioQuantity(r,e,s),BX("QUANTITY_INPUT_"+t).value=r,BX("QUANTITY_INPUT_"+t).defaultValue=r,updateQuantity("QUANTITY_INPUT_"+t,t,e,s)}function getCorrectRatioQuantity(t,e,a){var s=String(e).split("."),i=0;i=null!=s[1]&&null!=s[1]&&""!=s[1]?s[1].length:0;var l,r=parseInt(1e4*t)%parseInt(1e4*e),n=t,_=!1;if(e=parseFloat(e),0===r)return n;if(0!==e&&1!=e)for(l=e,max=parseFloat(t)+parseFloat(e);l<max;l=parseFloat(parseFloat(l)+parseFloat(e)).toFixed(i))n=l;else 1===e&&(n=0|t);return parseInt(n,10)!=parseFloat(n)&&(_=!0),n=!1===a&&!1===_?parseInt(n,10):parseFloat(n).toFixed(i)}function recalcBasketAjax(t){BX.showWait();var e,a,s=BX("action_var").value,i=BX("basket_items"),l=BX("delayed_items");if((e={sessid:BX.bitrix_sessid(),site_id:BX.message("SITE_ID"),props:{},action_var:s,select_props:BX("column_headers").value,offers_props:BX("offers_props").value,quantity_float:BX("quantity_float").value,count_discount_4_all_quantity:BX("count_discount_4_all_quantity").value,price_vat_show_value:BX("price_vat_show_value").value,hide_coupon:BX("hide_coupon").value,use_prepayment:BX("use_prepayment").value})[s]="recalculate",t&&"object"==typeof t)for(a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);if(i&&i.rows.length>0)for(a=1;i.rows.length>a;a++)e["QUANTITY_"+i.rows[a].id]=BX("QUANTITY_"+i.rows[a].id).value;if(l&&l.rows.length>0)for(a=1;l.rows.length>a;a++)e["DELAY_"+l.rows[a].id]="Y";BX.ajax({url:"/bitrix/components/bitrix/sale.basket.basket/ajax.php",method:"POST",data:e,dataType:"json",onsuccess:function(t){BX.closeWait(),updateBasketTable(null,t)}})}function showBasketItemsList(t){BX.removeClass(BX("basket_toolbar_button"),"current"),BX.removeClass(BX("basket_toolbar_button_delayed"),"current"),BX.removeClass(BX("basket_toolbar_button_subscribed"),"current"),BX.removeClass(BX("basket_toolbar_button_not_available"),"current"),BX("normal_count").style.display="inline-block",BX("delay_count").style.display="inline-block",BX("subscribe_count").style.display="inline-block",BX("not_available_count").style.display="inline-block",2==t?(BX("basket_items_list")&&(BX("basket_items_list").style.display="none"),BX("basket_items_delayed")&&(BX("basket_items_delayed").style.display="block",BX.addClass(BX("basket_toolbar_button_delayed"),"current"),BX("delay_count").style.display="none"),BX("basket_items_subscribed")&&(BX("basket_items_subscribed").style.display="none"),BX("basket_items_not_available")&&(BX("basket_items_not_available").style.display="none")):3==t?(BX("basket_items_list")&&(BX("basket_items_list").style.display="none"),BX("basket_items_delayed")&&(BX("basket_items_delayed").style.display="none"),BX("basket_items_subscribed")&&(BX("basket_items_subscribed").style.display="block",BX.addClass(BX("basket_toolbar_button_subscribed"),"current"),BX("subscribe_count").style.display="none"),BX("basket_items_not_available")&&(BX("basket_items_not_available").style.display="none")):4==t?(BX("basket_items_list")&&(BX("basket_items_list").style.display="none"),BX("basket_items_delayed")&&(BX("basket_items_delayed").style.display="none"),BX("basket_items_subscribed")&&(BX("basket_items_subscribed").style.display="none"),BX("basket_items_not_available")&&(BX("basket_items_not_available").style.display="block",BX.addClass(BX("basket_toolbar_button_not_available"),"current"),BX("not_available_count").style.display="none")):(BX("basket_items_list")&&(BX("basket_items_list").style.display="block",BX.addClass(BX("basket_toolbar_button"),"current"),BX("normal_count").style.display="none"),BX("basket_items_delayed")&&(BX("basket_items_delayed").style.display="none"),BX("basket_items_subscribed")&&(BX("basket_items_subscribed").style.display="none"),BX("basket_items_not_available")&&(BX("basket_items_not_available").style.display="none"))}function deleteCoupon(t){var e,a=BX.proxy_context;a&&a.hasAttribute("data-coupon")&&(e=a.getAttribute("data-coupon"))&&e.length>0&&recalcBasketAjax({delete_coupon:e})}BX.ready(function(){var t,e,a=BX.findChildren(BX("basket_items"),{tagName:"li",className:"sku_prop"},!0);if(a&&a.length>0)for(t=0;a.length>t;t++)BX.bind(a[t],"click",BX.delegate(function(t){skuPropClickHandler(t)},this));(e=BX("coupons_block"))&&BX.bindDelegate(e,"click",{attribute:"data-coupon"},BX.delegate(function(t){deleteCoupon(t)},this))});